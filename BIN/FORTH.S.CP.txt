NEW
  AUTO 3,1
*--------------------------------------
CP.RUN			>LDYA J.KEYWORDS,x
				clc
				jmp EmitJsrYA
*--------------------------------------
CP.IF			jsr EmitPullA
				jsr EmitPullA
 
				lda #$AA				TAX
				jsr EmitByte
				
				lda #$10				BPL
				jsr EmitByte
				
				lda #3					skip JMP abs
				jsr EmitByte

				lda #$4C				JMP
				jsr EmitByte
				
				ldy RP
				lda ZPCodePtr+1
				sta (pData),y
				dey

				lda ZPCodePtr
				sta (pData),y
				dey
				
				sty RP
				
				lda #0
				jsr EmitByte
				jmp EmitByte
*--------------------------------------
CP.ELSE

				clc
				rts
*--------------------------------------
CP.ENDIF		ldy RP
				iny
				lda (pData),y
				sta ZPPtr1
				
				iny
				lda (pData),y
				sta ZPPtr1+1
				
				sty RP
				
				lda ZPCodePtr
				sta (ZPPtr1)
				
				ldy #1
				lda ZPCodePtr+1
				sta (ZPPtr1),y
				
				clc
				rts
*--------------------------------------
MAN
SAVE usr/src/bin/forth.s.cp
LOAD usr/src/bin/forth.s
ASM
