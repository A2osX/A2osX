NEW
PREFIX /A2OSX.BUILD
AUTO 4,1
*---------------------------------------
OUT.Reset			ldx #4
					
					ldy #ASM.PC
					
.1					lda (pData),y
					pha
					iny
					dex
					bne .1
					
					ldx #4
					
					ldy #OUT.PC+3
					
.2					pla
					sta (pData),y
					dey
					dex
					bne .2

					>STZ.G OUT.Buf
					rts
*---------------------------------------
OUT.EmitByte		pha
						
					>LDA.G OUT.Buf
					cmp #3
					bne .2

					jsr SRC.PrintLineOn
					bcs .1
					
					>LDA.G ASM.LI.XON
					bpl .1
					jsr SRC.PrintLineOutBuf
					lda #13
					>SYSCALL PutChar.A
					lda #10
					>SYSCALL PutChar.A
					
.1					jsr OUT.Reset
					
					lda #0
					ldy #OUT.Buf
						
.2					inc
					sta (pData),y
					clc
					adc #OUT.Buf
					tay
						
					pla
					sta (pData),y
						
.8					>INC.G ASM.PC
					bne .80
					>INC.G ASM.PC+1
					bne .80
					>INC.G ASM.PC+2
					bne .80
					>INC.G ASM.PC+3
							
.80					clc
					rts
*---------------------------------------
MAN
SAVE /A2OSX.BUILD/BIN/DEV/ASM.S.OUT
LOAD /A2OSX.BUILD/BIN/DEV/ASM.S
ASM
