NEW
  AUTO 3,1
*--------------------------------------
SYSBAR.Enter	sec
				ror WND.SYSBAR.bA2osX

				jsr GetCBBuf
				bcs .9
				
				jsr SYSBAR.Show.A2osX
				
				>LDYA L.WND.SysBar
				
				jmp DrawCBPtrToYA1

.9				rts
*--------------------------------------
SYSBAR.Leave	bit WND.SYSBAR.bA2osX
				bpl .8
				
				stz WND.SYSBAR.bA2osX

				jsr GetCBBuf
				bcs .9
				
				jsr SYSBAR.Show.A2osX

				>LDYA L.WND.SysBar

				jmp DrawCBPtrToYA1

.8				clc
.9				rts				
*--------------------------------------
SYSBAR.Show		jsr GetCBBuf
				bcs .9
				
				jsr SYSBAR.Show.A2osX
				
				jsr SYSBAR.Show.W

				>LDYA L.WND.SysBar

				jmp DrawCBPtrToYA1
				
.9				rts
*--------------------------------------
SYSBAR.Show.A2osX
				lda #S.CB.CMD.FILLRECT
				jsr PutA2CBBuf
				
				lda #S.CB.OP.SET
				jsr PutA2CBBuf
				
				lda #S.CB.M.MONO
				jsr PutA2CBBuf
				
				lda PREFS.SYSBARCOLOR
				bit WND.SysBar.bA2osX
				bpl .1

				eor #$ff

.1				jsr PutA2CBBuf
				
				lda #0					X1
				jsr PutA2CBBuf
				jsr PutA2CBBuf

				lda WND.SysBar+S.OBJ.Y1
				jsr PutA2CBBuf
				lda WND.SysBar+S.OBJ.Y1+1
				jsr PutA2CBBuf

				lda WND.SysBar.A2osX.X2
				jsr PutA2CBBuf
				lda WND.SysBar.A2osX.X2+1
				jsr PutA2CBBuf

				lda WND.SysBar+S.OBJ.Y2
				jsr PutA2CBBuf
				lda WND.SysBar+S.OBJ.Y2+1
				jsr PutA2CBBuf
				
				rts
*--------------------------------------
SYSBAR.Show.W	lda #S.CB.CMD.FILLRECT
				jsr PutA2CBBuf
				
				lda #S.CB.OP.SET
				jsr PutA2CBBuf
				
				lda #S.CB.M.MONO
				jsr PutA2CBBuf
				
				lda PREFS.SYSBARCOLOR
				jsr PutA2CBBuf
				
				lda WND.SysBar.W.X1
				jsr PutA2CBBuf
				lda WND.SysBar.W.X1+1
				jsr PutA2CBBuf

				lda WND.SysBar+S.OBJ.Y1
				jsr PutA2CBBuf
				lda WND.SysBar+S.OBJ.Y1+1
				jsr PutA2CBBuf

				lda WND.SysBar.W.X2
				jsr PutA2CBBuf
				lda WND.SysBar.W.X2+1
				jsr PutA2CBBuf

				lda WND.SysBar+S.OBJ.Y2
				jsr PutA2CBBuf
				lda WND.SysBar+S.OBJ.Y2+1
				jmp PutA2CBBuf
*--------------------------------------
MAN
SAVE usr/src/lib/libgui.s.sysbar
LOAD usr/src/lib/libgui.s
ASM
