PR#3
PREFIX /A2OSX.SRC
NEW
INC 1
AUTO 6
				.LIST OFF	
*--------------------------------------
ERR.Print		>PUSHA					Save EC for PrintF

				ldx L.ERR.Codes
				stx ZPPTR1
				ldx L.ERR.Codes+1
				stx ZPPTR1+1

				ldy #0

.1				cmp (ZPPTR1),y
				beq .2
				iny
				cpy #ERR.Count
				bne .1

.2				sty .3+1

				lda L.ERR.Messages
				sta ZPPTR1
				lda L.ERR.Messages+1
				sta ZPPTR1+1
				
				ldy #0
				
.3				cpy #$ff				Self Modified
				beq .8

				lda (ZPPTR1)
				sec
				adc ZPPTR1
				sta ZPPTR1
				bcc .4
				inc ZPPTR1+1
.4				iny		
				bra .3
				
.8				>PUSHW ZPPTR1
				>LDYA L.MSG.ERROR
				>SYSCALL PrintFYA
				rts
*--------------------------------------
MAN
SAVE SBIN/SHELL.S.ERR
LOAD SBIN/SHELL.S
ASM
