NEW
  AUTO 3,1
*--------------------------------------
ERRORX			lda #ERRORX.MSG
				sta A1L
				lda /ERRORX.MSG
				sta A1L+1
				
				ldx #0

.1				lda	ERRORX.ID,x
				cmp A3L					ERROR CODE
				beq .3

				ldy #7

.11				iny
				lda (A1L),y
				bne .11

				tya
				sec
				adc A1L
				sta A1L
				bcc .2

				inc A1L+1

.2				inx
				cpx #ERRORX.CNT
				bcc .1

.3				ldy #7
				
.4				iny
				lda (A1L),y
				bne .4
				
				iny						includes ending \0
				sty A4L
				stz A4L+1
				
				stz A3L					srcBnk
			
				lda A2osX.ActBnk
				sta A3H					dstBnk
				
				jmp MEM.MBCpy
*--------------------------------------	MLI
ERRORX.ID		.DA #MLI.E.BADCALL
				.DA #MLI.E.IO
				.DA #MLI.E.NODEV
				.DA #MLI.E.WRTPROT
				.DA #MLI.E.DSKSWIT
				.DA #MLI.E.OFFLINE
				.DA #MLI.E.INVPATH
				.DA #MLI.E.PNOTFND
				.DA #MLI.E.VNOTFND
				.DA #MLI.E.FNOTFND
				.DA #MLI.E.DUPFILE
				.DA #MLI.E.VOLFULL
				.DA #MLI.E.DIRFULL
				.DA #MLI.E.INCFF
				.DA #MLI.E.UNSUPST
				.DA #MLI.E.EOF
				.DA #MLI.E.LOCKED
				.DA #MLI.E.OPEN
				.DA #MLI.E.BADBUF
*--------------------------------------	KERNEL
				.DA #E.OOM
				.DA #E.OOH
				.DA #E.INVH
				.DA #E.BUF
				.DA #E.BADPATH
				.DA #E.BADARG
				.DA #E.NSP
				.DA #E.SYN
				.DA #E.ENVF
				.DA #E.IBIN
				.DA #E.FTB
				.DA #E.INUM
				.DA #3					Ctrl-C
*--------------------------------------	PARSER
				.DA #E.CSYN
				.DA #E.ESYN
				.DA #E.STACKERROR
				.DA #E.STKOVERFLOW
				.DA #E.NOWHILE
				.DA #E.NOFOR
				.DA #E.NOIF
				.DA #E.BADFTYPE
				.DA #E.FUNDEF
				.DA #E.UNEXPEOF
				.DA #E.NODO
				.DA #E.REDEF
				.DA #E.TMISMATCH
*--------------------------------------
ERRORX.CNT		.EQ *-ERRORX.ID
*--------------------------------------
ERRORX.MSG		.CZ "Bad MLI Call"
				.CZ "I/O Error"
				.CZ "No Device"
				.CZ "Disk Write-Prot."
				.CZ "Disk Switched"
				.CZ "Offline Device"
				.CZ "Invalid Path"
				.CZ "Path Not Found"
				.CZ "Vol Not Found"
				.CZ "File Not Found"
				.CZ "Dup. Filename"
				.CZ "Vol Is Full"
				.CZ "Dir Is Full"
				.CZ "Incomp. File Format"
				.CZ "Unsupp. Storage"
				.CZ "End Of File"
				.CZ "File Locked"
				.CZ "File Opened"
				.CZ "Bad Buffer"
*--------------------------------------
				.CZ "Out Of Memory"
				.CZ "Out Of Handle"
				.CZ "Invalid Handle"
				.CZ "Buffer Overflow"
				.CZ "Bad Path"
				.CZ "Bad API Argument"
				.CZ "No Such Process"
				.CZ "Syntax Error"
				.CZ "Env Is Full"
				.CZ "Invalid BIN"
				.CZ "File Too Big"
				.CZ "Invalid Numerical"
				.CZ "User Interrupt"
*--------------------------------------
				.CZ "Cmd Syntax Error"
				.CZ "Exp. Syntax Error"
				.CZ "Stack Error"
				.CZ "Stack Overflow"
				.CZ "LOOP Without WHILE"
				.CZ "NEXT Without FOR"
				.CZ "FI/ELSE Without IF"
				.CZ "Bad File Type"
				.CZ "Undef. Symbol"
				.CZ "Unexp. EOF"
				.CZ "LOOP Without DO"
				.CZ "Symbol Redef"
				.CZ "Type Mismatch"
*--------------------------------------
				.CZ "Unknown Error"
*--------------------------------------
MAN
SAVE usr/src/sys/kernel.s.errorx
LOAD usr/src/sys/kernel.s
ASM
