PR#3
PREFIX /A2OSX.SRC
NEW
INC 1
AUTO 6
				.LIST OFF
*--------------------------------------
* $D000-D0FF  	KERNEL.SYSCALL Jmp Table
*--------------------------------------
KERNEL.SYSCALL	
*--------------------------------------
*   Bank 1
*--------------------------------------
				.DA K.COutA				$00
				.DA 0
				.DA K.PStrOutYA
				.DA 0
				.DA K.HexOutA
				.DA K.HexOutYA
				.DA K.DecOutA
				.DA K.DecOutYA
*--------------------------------------
				.DA K.NewPStrYA			$10
				.DA K.PStrCpy
				.DA K.PStrCat
				.DA K.PStrMatch
				.DA K.PStrUprYA
				.DA K.PStrLwrYA
				.DA K.PStrFTime	
				.DA K.PStr2StrArrayYA
*--------------------------------------
				.DA K.ExecProcessNewEnvYA	$20
				.DA K.ExecProcessYA		
				.DA K.CreateProcessNewEnvYA
				.DA K.CreateProcessYA
				.DA K.GetPSByIDA 
				.DA 0
				.DA K.Sleep
				.DA 0
*--------------------------------------
				.DA K.GetArgC			$30
				.DA K.GetArgA
				.DA K.ExpandPStrYA		$32
				.DA 0
				.DA K.PutEnvYA
				.DA K.SetEnv	
				.DA K.GetEnvYA
				.DA K.UnsetEnvYA	
*--------------------------------------
*   Bank 2
*--------------------------------------
				.DA K.FileSearch 		$40
				.DA K.GetFullPathYA
				.DA K.LoadFile
				.DA K.SaveFile
				.DA 0
				.DA 0
				.DA 0
				.DA 0
*--------------------------------------				
				.DA K.LoadDrvYA			$50 
				.DA K.LoadLibYA			
				.DA K.UnloadLibA
				.DA K.LoadExeYA
				.DA K.TimeYA
				.DA K.CTime2Time
				.DA K.PTime2Time
				.DA 0
*--------------------------------------
				.DA K.FOPEN				$60
				.DA K.FCLOSEA
				.DA K.FREAD
				.DA K.FWRITE
				.DA K.FFLUSHA
				.DA K.FSEEK
				.DA K.FTELLA
				.DA K.FEOFA
*--------------------------------------
				.DA K.REMOVEYA			$70
				.DA K.RENAME
				.DA K.STAT
				.DA 0
				.DA K.OPENDIRYA
				.DA K.READDIRA
				.DA K.CLOSEDIRA
				.DA K.MKDIRYA
*--------------------------------------
*  $E000
*--------------------------------------
				.DA K.GetMem			$80
				.DA K.FreeMemA
				.DA K.GetMemPtrA
				.DA K.GetMemByIDA
				.DA K.GetMemByNameYA
				.DA K.LoadStockObjectYA
				.DA K.GetStockObjectA
				.DA K.FreeStockObject
*--------------------------------------
				.DA K.GetDevByIDA		$90
				.DA K.GetDevByNameYA
				.DA K.GetDevInfoA
				.DA K.GetKeyboardEvent
*--------------------------------------
* LO Byte :
*   #RRAMWRAMBNK1 or #RRAMWRAMBNK2
* LO Byte :
*--------------------------------------
KERNEL.SYSCALL.FLAGS
*--------------------------------------
				.DA #$80					$00 : CIO $D001
				.DA #RRAMWRAMBNK1
				.DA #$80
				.DA #RRAMWRAMBNK1
				.DA #$80
				.DA #RRAMWRAMBNK1
				.DA #$80
				.DA #RRAMWRAMBNK1
				
				.DA #$80
				.DA #RRAMWRAMBNK1
				.DA #$80
				.DA #RRAMWRAMBNK1
				.DA #$80
				.DA #RRAMWRAMBNK1
				.DA #$80
				.DA #RRAMWRAMBNK1
*--------------------------------------
				.DA #$80					$10 : STR $D001
				.DA #RRAMWRAMBNK1
				.DA #$80
				.DA #RRAMWRAMBNK1
				.DA #$80
				.DA #RRAMWRAMBNK1
				.DA #$80
				.DA #RRAMWRAMBNK1
				
				.DA #$80
				.DA #RRAMWRAMBNK1
				.DA #$80
				.DA #RRAMWRAMBNK1
				.DA #$80
				.DA #RRAMWRAMBNK1
				.DA #$80
				.DA #RRAMWRAMBNK1
*--------------------------------------
				.DA #$80					$20 : 
				.DA #RRAMWRAMBNK1
				.DA #$80
				.DA #RRAMWRAMBNK1
				.DA #$80
				.DA #RRAMWRAMBNK1
				.DA #$80
				.DA #RRAMWRAMBNK1
				
				.DA #$80					$28 : 
				.DA #RRAMWRAMBNK1
				.DA #$80
				.DA #RRAMWRAMBNK1
				.DA #$80
				.DA #RRAMWRAMBNK1
				.DA #$80
				.DA #RRAMWRAMBNK1
*--------------------------------------
				.DA #$80					$30 : ARG
				.DA #RRAMWRAMBNK1
				.DA #$80
				.DA #RRAMWRAMBNK1
				.DA #$80					$32 : ENV
				.DA #RRAMWRAMBNK1
				.DA #$80
				.DA #RRAMWRAMBNK1
				
				.DA #$80
				.DA #RRAMWRAMBNK1
				.DA #$80
				.DA #RRAMWRAMBNK1
				.DA #$80
				.DA #RRAMWRAMBNK1
				.DA #$80
				.DA #RRAMWRAMBNK1
*--------------------------------------
* $40 -> $7E
*--------------------------------------
				.DA #$80					$40 : FIO
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
*--------------------------------------
				.DA #$80					$50 :
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
*--------------------------------------
				.DA #$80					$60 :
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
*--------------------------------------
				.DA #$80					$70 :
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
*--------------------------------------
				.DA #$80					$80 :
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
*--------------------------------------
				.DA #$80					$90 :
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
*--------------------------------------
MAN
SAVE SYS/KERNEL.S.JMP
LOAD SYS/KERNEL.S
ASM
