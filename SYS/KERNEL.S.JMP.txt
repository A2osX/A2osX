PR#3
PREFIX /A2OSX.BUILD
LOMEM $A00
INC 1
AUTO 6
*--------------------------------------
* $D000-D0FF  	K.SYSCALL.JMP Jmp Table
*--------------------------------------
*   Bank 1
*--------------------------------------
K.SYSCALL.JMP	.DA K.FileSearch 		$00
				.DA K.GetFullPath.YA
				.DA K.LoadFile
				.DA K.SaveFile
				.DA K.ChTyp
				.DA K.ChMod
				.DA K.ChOwn
				.DA K.ChGrp
*--------------------------------------				
				.DA K.LoadDrv.YA		$10 
				.DA K.LoadLib.YA			
				.DA K.UnloadLib.A
				.DA K.LoadBin.YA
				.DA K.Time.YA
				.DA K.CTime2Time
				.DA K.PTime2Time
				.DA 0
*--------------------------------------
				.DA K.FOpen				$20
				.DA K.FClose.A
				.DA K.FRead
				.DA K.FWrite
				.DA K.FFlush.A
				.DA K.FSeek
				.DA K.FTell.A
				.DA K.FEOF.A
*--------------------------------------
				.DA K.Remove.YA			$30
				.DA K.Rename
				.DA K.Stat
				.DA 0
				.DA K.OpenDir.YA
				.DA K.ReadDir.A
				.DA K.CloseDir.A
				.DA K.MKDir.YA
*--------------------------------------
*   Bank 2
*--------------------------------------
				.DA 0					$40
				.DA K.SScanF
				.DA 0
				.DA K.PrintF.YA
				.DA K.SPrintF.YA
				.DA K.FPrintF.YA
				.DA K.AToI
				.DA 0
*--------------------------------------
				.DA 0					$50
				.DA K.StrCpy
				.DA K.StrCat
				.DA K.StrMatch
				.DA K.StrUpr.YA
				.DA K.StrLwr.YA
				.DA K.StrFTime	
				.DA 0					K.PStr2StrArrayYA
*--------------------------------------
				.DA K.ExecProcessNewEnv.YA	$60
				.DA K.ExecProcess.YA		
				.DA K.CreateProcessNewEnv.YA
				.DA K.CreateProcess.YA
				.DA K.GetPSByID.A 
				.DA 0
				.DA K.Sleep
				.DA 0
*--------------------------------------
				.DA K.GetArgC			$70
				.DA K.GetArg.A
				.DA K.ExpandPStr.YA
				.DA 0
				.DA K.PutEnv.YA
				.DA K.SetEnv	
				.DA K.GetEnv.YA
				.DA K.UnsetEnv.YA	
*--------------------------------------
				.DA K.GetDevByID.A		$80
				.DA K.GetDevByName.YA
				.DA K.GetDevStatus.A
				.DA 0
				.DA K.MKNod.YA
				.DA K.MKNod.A
				.DA K.MKFIFO
				.DA 0
*--------------------------------------
*  $E000
*--------------------------------------
				.DA K.GetMem			$90
				.DA K.FreeMem.A
				.DA K.GetMemPtr.A
				.DA K.GetMemByID.A
				.DA K.GetMem.YA
				.DA K.GetMem0.YA
				.DA 0
				.DA 0
*--------------------------------------
				.DA K.SetLoMem			$A0
				.DA K.GetMemStat.YA
				.DA 0
				.DA 0
				.DA K.LoadStkObj.YA
				.DA K.GetStkObj.A
				.DA K.FreeStkObj.A
				.DA 0
*--------------------------------------
				.DA K.FPutC.AY			$B0
				.DA K.PutChar.A
				.DA K.GetC.A
				.DA K.GetChar
				.DA K.FPutS
				.DA K.PutS.YA
				.DA K.FGetS
				.DA K.GetS.YA
*--------------------------------------
* LO Byte :
*   #RRAMWRAMBNK1 or #RRAMWRAMBNK2
*--------------------------------------
K.SYSCALL.FLAGS	.DA #$80				$00
				.DA #RRAMWRAMBNK1
				.DA #$80
				.DA #RRAMWRAMBNK1
				.DA #$80
				.DA #RRAMWRAMBNK1
				.DA #$80
				.DA #RRAMWRAMBNK1
				
				.DA #$80
				.DA #RRAMWRAMBNK1
				.DA #$80
				.DA #RRAMWRAMBNK1
				.DA #$80
				.DA #RRAMWRAMBNK1
				.DA #$80
				.DA #RRAMWRAMBNK1
*--------------------------------------
				.DA #$80				$10
				.DA #RRAMWRAMBNK1
				.DA #$80
				.DA #RRAMWRAMBNK1
				.DA #$80
				.DA #RRAMWRAMBNK1
				.DA #$80
				.DA #RRAMWRAMBNK1
				
				.DA #$80
				.DA #RRAMWRAMBNK1
				.DA #$80
				.DA #RRAMWRAMBNK1
				.DA #$80
				.DA #RRAMWRAMBNK1
				.DA #$80
				.DA #RRAMWRAMBNK1
*--------------------------------------
				.DA #$80				$20
				.DA #RRAMWRAMBNK1
				.DA #$80
				.DA #RRAMWRAMBNK1
				.DA #$80
				.DA #RRAMWRAMBNK1
				.DA #$80
				.DA #RRAMWRAMBNK1
				
				.DA #$80
				.DA #RRAMWRAMBNK1
				.DA #$80
				.DA #RRAMWRAMBNK1
				.DA #$80
				.DA #RRAMWRAMBNK1
				.DA #$80
				.DA #RRAMWRAMBNK1
*--------------------------------------
				.DA #$80				$30
				.DA #RRAMWRAMBNK1
				.DA #$80
				.DA #RRAMWRAMBNK1
				.DA #$80
				.DA #RRAMWRAMBNK1
				.DA #$80
				.DA #RRAMWRAMBNK1
				
				.DA #$80
				.DA #RRAMWRAMBNK1
				.DA #$80
				.DA #RRAMWRAMBNK1
				.DA #$80
				.DA #RRAMWRAMBNK1
				.DA #$80
				.DA #RRAMWRAMBNK1
*--------------------------------------
* $40 -> $8E
*--------------------------------------
				.DA #$80				$40
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
*--------------------------------------
				.DA #$80				$50
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
*--------------------------------------
				.DA #$80				$60
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
*--------------------------------------
				.DA #$80				$70
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
*--------------------------------------
				.DA #$80				$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
				.DA #$80
				.DA #RRAMWRAMBNK2
*--------------------------------------
				.DA 0					$90 : MemMgr at $E000
				.DA 0
				.DA 0
				.DA 0
				.DA 0
				.DA 0
				.DA 0
				.DA 0

				.DA 0
				.DA 0
				.DA 0
				.DA 0
				.DA 0
				.DA 0
				.DA 0
				.DA 0
*--------------------------------------
				.DA 0					$A0
				.DA 0
				.DA 0
				.DA 0
				.DA 0
				.DA 0
				.DA 0
				.DA 0

				.DA 0
				.DA 0
				.DA 0
				.DA 0
				.DA 0
				.DA 0
				.DA 0
				.DA 0
*--------------------------------------
				.DA 0					$B0
				.DA 0
				.DA 0
				.DA 0
				.DA 0
				.DA 0
				.DA 0
				.DA 0

				.DA 0
				.DA 0
				.DA 0
				.DA 0
				.DA 0
				.DA 0
				.DA 0
				.DA 0
*--------------------------------------
PullPtr1Ptr2Ptr3
				sec
				.HS 90					bcc
PullPtr1Ptr2	clc
				>PULLW ZPPtr1
				>PULLW ZPPtr2
				bcc .9
				>PULLW ZPPtr3
.9				rts
*--------------------------------------
MAN
SAVE /A2OSX.SRC/SYS/KERNEL.S.JMP
LOAD /A2OSX.SRC/SYS/KERNEL.S
ASM
